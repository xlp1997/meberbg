webpackJsonp([8],{"/eyB":function(e,t,n){"use strict";function o(e){n("gM5g")}Object.defineProperty(t,"__esModule",{value:!0});var i=n("8B1Q"),s=n("0qo+"),a=n("C7Lr"),r=o,l=a(i.a,s.a,!1,r,null,null);t.default=l.exports},"0qo+":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("z-modular",[n("el-form",{ref:"companyInfo",attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"商品名称"}},[n("el-input",{attrs:{maxlength:20},model:{value:e.commodityName,callback:function(t){e.commodityName=t},expression:"commodityName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"封面图"}},[n("z-upload",{attrs:{length:e.bannerLength,fileType:"商品"},on:{preview:e.enlarge,upload:e.goodUpload},model:{value:e.banner,callback:function(t){e.banner=t},expression:"banner"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"到付"}},[n("el-checkbox",{model:{value:e.daofuBtn,callback:function(t){e.daofuBtn=t},expression:"daofuBtn"}},[e._v("接受")])],1),e._v(" "),n("el-form-item",{attrs:{label:"门店提货"}},[n("el-checkbox",{model:{value:e.isSelfTaking,callback:function(t){e.isSelfTaking=t},expression:"isSelfTaking"}},[e._v("接受")])],1),e._v(" "),n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("span",[e._v("商品种类")]),e._v(" "),n("div",{staticClass:"businessTypeBox"},[e._l(e.commodityTypeList,function(t,o){return n("div",{staticClass:"businessType"},[n("span",{staticClass:"closeBtn",on:{click:function(t){e.goodsTypeDelete(o)}}}),e._v(" "),n("el-form-item",{attrs:{label:"种类"}},[n("el-input",{attrs:{placeholder:"种类"},model:{value:t.commodityTypeName,callback:function(n){e.$set(t,"commodityTypeName",n)},expression:"item.commodityTypeName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"价格（元）"}},[n("el-input",{attrs:{type:"number",placeholder:"价格"},model:{value:t.commodityTypePrice,callback:function(n){e.$set(t,"commodityTypePrice",n)},expression:"item.commodityTypePrice"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"库存"}},[n("el-input",{attrs:{type:"number",placeholder:"库存(请输入整数)"},model:{value:t.commodityTypeStock,callback:function(n){e.$set(t,"commodityTypeStock",n)},expression:"item.commodityTypeStock"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"运费（元）"}},[n("el-input",{attrs:{type:"number",placeholder:"运费"},model:{value:t.freight,callback:function(n){e.$set(t,"freight",n)},expression:"item.freight"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"平台服务费（%）"}},[n("el-input",{attrs:{placeholder:"平台服务费",disabled:!0},model:{value:t.commodityTypeRebate,callback:function(n){e.$set(t,"commodityTypeRebate",n)},expression:"item.commodityTypeRebate"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"导购奖励（金币）"}},[n("el-input",{attrs:{type:"number",placeholder:"导购奖励"},model:{value:t.reward,callback:function(n){e.$set(t,"reward",n)},expression:"item.reward"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"消费奖励（金币）"}},[n("el-input",{attrs:{type:"number",placeholder:"消费奖励"},model:{value:t.consumptionReward,callback:function(n){e.$set(t,"consumptionReward",n)},expression:"item.consumptionReward"}})],1)],1)}),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addgoosType}},[e._v("添加种类")])],2)]),e._v(" "),n("el-form-item",{attrs:{label:"段落内容"}},[n("div",{staticClass:"videoImgTextBox"},e._l(e.goodsContent,function(t,o){return n("div",{staticClass:"videoImg"},[n("span",{staticClass:"close",on:{click:function(t){e.newsDelete(o)}}}),e._v(" "),n("el-input",{attrs:{placeholder:"图片/视频说明",type:"textarea",autosize:{minRows:8,maxRows:4}},model:{value:t.text,callback:function(n){e.$set(t,"text",n)},expression:"items.text"}}),e._v(" "),n("z-upload",{attrs:{fileType:"商品",type:"0",length:e.bannerLength},on:{preview:e.enlarge},model:{value:t.url,callback:function(n){e.$set(t,"url",n)},expression:"items.url"}})],1)})),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addPhase}},[e._v("下一段")])],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("发布内容")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.cancel}},[e._v("取消发布")])],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[n("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],s={render:o,staticRenderFns:i};t.a=s},"8B1Q":function(e,t,n){"use strict";var o=n("3cXf"),i=n.n(o),s=n("KOga");t.a={data:function(){return{bannerLength:10,daofuBtn:!1,isSelfTaking:!1,dialogVisible:!1,dialogImageUrl:"",commodityName:"",sysDict:[],sysValue:"",commodityTypeList:[{commodityTypeName:"",commodityTypePrice:"",commodityTypeStock:"",freight:"",commodityTypeRebate:"",reward:"",consumptionReward:""}],banner:"",goodsContent:[{url:[],text:""}],pickerOptions1:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},methods:{cancel:function(){this.$parent.leftItme("商品管理","/goodsManage")},newsDelete:function(e){this.goodsContent.splice(e,1)},addgoosType:function(){this.commodityTypeList.push({commodityTypeName:"",commodityTypePrice:"",commodityTypeStock:"",freight:"",commodityTypeRebate:this.commodityTypeList[0].commodityTypeRebate,reward:"",consumptionReward:""})},goodsTypeDelete:function(e){this.commodityTypeList.splice(e,1)},addPhase:function(){this.goodsContent.push({url:[],text:"",newsTypeVal:""})},enlarge:function(e){console.log(e),this.dialogImageUrl=e,this.dialogVisible=!0},goodUpload:function(e){this.banner=e},huilu:function(){var e=this;n.i(s.a)("/sysDictController/queryGoldCoinRateSysDict.do").then(function(t){e.sysValue=t[0].sysValue}).catch(function(e){console.log(e),_this.$notify.error({title:"错误",message:"加载失败！"})})},addGoods:function(){var e=this;console.log(this.endTime);var t=this;if(""==this.commodityName)this.$message({message:"请输入商品名称",type:"warning"});else if(""==this.banner||0==this.banner.length)this.$message({message:"请上传商品封面图",type:"warning"});else{var o=!0;if(this.commodityTypeList.forEach(function(t){0==t.commodityTypeName.length&&(e.$message({message:"请输入种类名称",type:"warning"}),o=!1),0==t.commodityTypePrice.length?(e.$message({message:"请输入价格",type:"warning"}),o=!1):parseInt(t.commodityTypePrice)<0&&(e.$message({message:"价格不能为负数",type:"warning"}),o=!1);var n=/[%]/g;0==t.commodityTypeRebate.length?(e.$message({message:"请输入返佣值",type:"warning"}),o=!1):parseInt(t.commodityTypeRebate)<0?(e.$message({message:"返佣不能为负数",type:"warning"}),o=!1):n.test(t.commodityTypeRebate)||(e.$message({message:"返佣必须为百分数",type:"warning"}),o=!1),0==t.commodityTypeStock.length?(e.$message({message:"请输入库存",type:"warning"}),o=!1):parseInt(t.commodityTypeStock)<0?(e.$message({message:"库存不能为负数",type:"warning"}),o=!1):String(t.commodityTypeStock).indexOf(".")>-1&&(e.$message({message:"库存不能为小数",type:"warning"}),o=!1),0==t.freight.length?(e.$message({message:"请输入运费",type:"warning"}),o=!1):parseInt(t.freight)<0&&(e.$message({message:"运费不能为负数",type:"warning"}),o=!1);var i=t.commodityTypePrice*e.sysValue,s=Number(t.consumptionReward)+Number(t.reward);0==t.reward.length?(e.$message({message:"请输入导购奖励",type:"warning"}),o=!1):parseInt(t.reward)<0?(e.$message({message:"导购奖励不能为负数",type:"warning"}),o=!1):t.reward>i?(e.$message({message:"导购奖励不能超过"+i,type:"warning"}),o=!1):0==t.consumptionReward.length?(e.$message({message:"请输入消费奖励",type:"warning"}),o=!1):s>i&&(e.$message({message:"消费奖励+导购奖励不能超过价格",type:"warning"}),o=!1)}),o){var a=new FormData,r=i()(this.goodsContent),l=i()(this.banner),m=i()(this.commodityTypeList);a.append("commodityName",this.commodityName),a.append("commodityFfList",r),a.append("commodityPhotoList",l),a.append("token",this.$store.state.userInfo.token),a.append("businessId",this.$store.state.userInfo.businessId),a.append("commodityTypeList",m),1==this.daofuBtn?a.append("isCashDelivery",1):a.append("isCashDelivery",2),1==this.isSelfTaking?a.append("isSelfTaking",1):a.append("isSelfTaking",2),n.i(s.a)("/commodityController/releaseCommodity.do",a,"FORM",{contentType:""}).then(function(n){200==n.code?(t.$notify({title:"成功",message:"发布成功",type:"success"}),e.$parent.closeJump("商品管理","/goodsManage")):t.$notify.error({title:"错误",message:"上传失败"+n.msg})}).catch(function(e){console.log(e),t.$notify.error({title:"错误",message:"上传失败"})})}}},fuwufei:function(){var e=this;n.i(s.a)("/businessController/queryBusiness.do",{},"POST").then(function(t){e.commodityTypeList[0].commodityTypeRebate=t.business_rebate}).catch(function(e){console.log(e),_this.$notify.error({title:"错误",message:"加载失败"})})}},mounted:function(){this.huilu(),this.fuwufei()}}},cQnv:function(e,t,n){t=e.exports=n("UTlt")(!0),t.push([e.i,'.demo-form-inline{padding-left:45px}.businessTypeBox{margin:15px 0 15px 55px}.businessTypeBox .businessType{padding:20px;position:relative;border:1px solid #e6e6e6;margin-bottom:15px}.businessTypeBox .businessType .el-input{margin-bottom:15px}.businessTypeBox .businessType .el-input:last-child{margin-bottom:0}.businessTypeBox .businessType .el-form-item{margin-right:80px}.businessTypeBox .businessType .closeBtn{position:absolute;right:10px;top:10px;width:30px;height:30px;border-radius:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #ccc;cursor:pointer}.businessTypeBox .businessType .closeBtn:after{content:"\\D7";font-size:26px;-webkit-transform:translateY(-3px);transform:translateY(-3px);color:#999}.businessTypeBox .businessType .closeBtn:hover:after{color:red}.videoImgTextBox{border:1px solid #ccc}.videoImgTextBox,.videoImgTextBox .nextPhaseBtn{margin-bottom:15px}.videoImgTextBox .videoImg{padding:10px;position:relative;border-bottom:1px solid #e6e6e6}.videoImgTextBox .videoImg .el-textarea{margin-bottom:15px;max-width:100%;border:0}.videoImgTextBox .videoImg .el-textarea__inner{border:0!important}.videoImgTextBox .videoImg .close{position:absolute;right:10px;top:10px;width:30px;height:30px;border-radius:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #ccc;cursor:pointer}.videoImgTextBox .videoImg .close:after{content:"\\D7";font-size:26px;-webkit-transform:translateY(-3px);transform:translateY(-3px);color:#999}.videoImgTextBox .videoImg .close:hover:after{color:red}.search{margin-top:15px}',"",{version:3,sources:["E:/xiaoliping/newPersonProject/1.6.1/merchantsBackstage/src/page/goodsManage/add.vue"],names:[],mappings:"AAEA,kBACE,iBAAmB,CACpB,AACD,iBACE,uBAA2B,CAC5B,AACD,+BACI,aAAc,AACd,kBAAmB,AACnB,yBAA0B,AAC1B,kBAAoB,CACvB,AACD,yCACM,kBAAoB,CACzB,AACD,oDACQ,eAAmB,CAC1B,AACD,6CACM,iBAAmB,CACxB,AACD,yCACM,kBAAmB,AACnB,WAAY,AACZ,SAAU,AACV,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,wBAAyB,AACrB,qBAAsB,AAClB,uBAAwB,AAChC,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,sBAAuB,AACvB,cAAgB,CACrB,AACD,+CACQ,cAAa,AACb,eAAgB,AAChB,mCAAoC,AAC5B,2BAA4B,AACpC,UAAY,CACnB,AACD,qDACQ,SAAY,CACnB,AACD,iBACE,qBAAuB,CAExB,AACD,gDAFE,kBAAoB,CAIrB,AACD,2BACI,aAAc,AACd,kBAAmB,AACnB,+BAAiC,CACpC,AACD,wCACM,mBAAoB,AACpB,eAAgB,AAChB,QAAY,CACjB,AACD,+CACM,kBAAuB,CAC5B,AACD,kCACM,kBAAmB,AACnB,WAAY,AACZ,SAAU,AACV,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,wBAAyB,AACrB,qBAAsB,AAClB,uBAAwB,AAChC,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,sBAAuB,AACvB,cAAgB,CACrB,AACD,wCACQ,cAAa,AACb,eAAgB,AAChB,mCAAoC,AAC5B,2BAA4B,AACpC,UAAY,CACnB,AACD,8CACQ,SAAY,CACnB,AACD,QACE,eAAiB,CAClB",file:"add.vue",sourcesContent:['\n@charset "UTF-8";\n.demo-form-inline {\n  padding-left: 45px;\n}\n.businessTypeBox {\n  margin: 15px 0px 15px 55px;\n}\n.businessTypeBox .businessType {\n    padding: 20px;\n    position: relative;\n    border: 1px solid #e6e6e6;\n    margin-bottom: 15px;\n}\n.businessTypeBox .businessType .el-input {\n      margin-bottom: 15px;\n}\n.businessTypeBox .businessType .el-input:last-child {\n        margin-bottom: 0px;\n}\n.businessTypeBox .businessType .el-form-item {\n      margin-right: 80px;\n}\n.businessTypeBox .businessType .closeBtn {\n      position: absolute;\n      right: 10px;\n      top: 10px;\n      width: 30px;\n      height: 30px;\n      border-radius: 50%;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      border: 1px solid #ccc;\n      cursor: pointer;\n}\n.businessTypeBox .businessType .closeBtn::after {\n        content: "×";\n        font-size: 26px;\n        -webkit-transform: translateY(-3px);\n                transform: translateY(-3px);\n        color: #999;\n}\n.businessTypeBox .businessType .closeBtn:hover::after {\n        color: #f00;\n}\n.videoImgTextBox {\n  border: 1px solid #ccc;\n  margin-bottom: 15px;\n}\n.videoImgTextBox .nextPhaseBtn {\n    margin-bottom: 15px;\n}\n.videoImgTextBox .videoImg {\n    padding: 10px;\n    position: relative;\n    border-bottom: 1px solid #e6e6e6;\n}\n.videoImgTextBox .videoImg .el-textarea {\n      margin-bottom: 15px;\n      max-width: 100%;\n      border: 0px;\n}\n.videoImgTextBox .videoImg .el-textarea__inner {\n      border: 0px !important;\n}\n.videoImgTextBox .videoImg .close {\n      position: absolute;\n      right: 10px;\n      top: 10px;\n      width: 30px;\n      height: 30px;\n      border-radius: 50%;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      border: 1px solid #ccc;\n      cursor: pointer;\n}\n.videoImgTextBox .videoImg .close::after {\n        content: "×";\n        font-size: 26px;\n        -webkit-transform: translateY(-3px);\n                transform: translateY(-3px);\n        color: #999;\n}\n.videoImgTextBox .videoImg .close:hover::after {\n        color: #f00;\n}\n.search {\n  margin-top: 15px;\n}\n'],sourceRoot:""}])},gM5g:function(e,t,n){var o=n("cQnv");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("FIqI")("8b5bd608",o,!0,{})}});
//# sourceMappingURL=8.e94bd70140b8da4cd0c5.js.map