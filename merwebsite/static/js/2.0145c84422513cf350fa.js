webpackJsonp([2],{UlBi:function(e,t,o){"use strict";var i=o("3cXf"),n=o.n(i),a=o("4YfN"),s=o.n(a),l=o("HVJf"),r=o("KOga");t.a={computed:s()({},o.i(l.a)(["userInfo"])),data:function(){return{pageNo:1,pageSize:10,page:1,size:1,userName:"",commodityName:"",orderNumber:"",tableData:[],orderType:[{value:1,label:"待付款"},{value:2,label:"待发货"},{value:3,label:"待收货"},{value:4,label:"申请退款中"},{value:5,label:"已取消"},{value:6,label:"已完成"},{value:9,label:"已退款"}],orderTypeval:"",conDate:[],expressDelivery:[],deliveryVal:"",deliveryNum:"",dialogFormVisible1:!1,dialogVisible2:!1,dialogVisible:!1,diveryNum:!1,LogisticsInfoObj:"",form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",refundNum:"",applyTime:"",applyMsg:"",haveDone:"",refundMoney:"",applyIndex:!1,orderNum:!1,myDetail:!0,myDelivery:!0,myRefund:!0,myLogistics:!0}},methods:{myPowerStatus:function(){var e=this,t=this.userInfo.menuList;console.log(t),t.forEach(function(t){"订单管理"==t.sysMenuName&&t.childList.forEach(function(t){"订单发货"==t.sysMenuName&&(e.myDelivery=!0),"订单详情"==t.sysMenuName&&(e.myDetail=!0),"订单退款"==t.sysMenuName&&(e.myRefund=!0),"订单物流"==t.sysMenuName&&(e.myLogistics=!0)})})},showRefund:function(e,t){this.dialogVisible2=!0,this.applyTime=t.apply_return_goods_time,this.applyMsg=t.refund_msg,this.haveDone=t.price,this.refundMoney=t.price,this.applyIndex=e,this.orderNum=t.my_order_id},toRefund:function(e){var t=this,i=this,n=new FormData;n.append("myOrderId",this.orderNum),n.append("refundStatus",e),n.append("money",this.refundMoney),n.append("refundReson",""),n.append("token",this.$store.state.userInfo.token),n.append("userId",this.$store.state.userInfo.userId),this.refundMoney>this.haveDone?i.$notify.error({title:"退款失败",message:"退款金额不能超过支付金额"}):this.refundMoney<0?i.$notify.error({title:"退款失败",message:"退款金额不能为负数"}):o.i(r.a)("/myorderController/updateTKMyorder.do",n,"FORM",{contentType:""}).then(function(e){200==e.code?(i.$notify({title:"成功",message:"操作成功",type:"success"}),t.diveryNum=!1,t.dialogVisible2=!1,t.tableData[t.applyIndex].order_type="已取消",t.applyIndex=!1):(i.$notify.error({title:"操作失败",message:e.msg}),t.dialogVisible2=!1)}).catch(function(e){console.log(e),i.$notify.error({title:"错误",message:"发货失败"})})},handleClose:function(e){e()},LogisticsInfo:function(e,t){var i=this;o.i(r.a)("/myorderController/queryMyorderLogistics.do",{expressDeliveryName:t.express_delivery_name,expressDeliveryNo:t.express_delivery_no,myOrderId:t.my_order_id},"POST").then(function(e){console.log(e),200==e.code&&(i.dialogVisible=!0,i.LogisticsInfoObj=e,i.LogisticsInfoObj.info.reverse())})},allDeliveries:function(){var e=this,t=this;o.i(r.a)("/logisticsController/queryAllInfo.do").then(function(t){console.log(t),void 0!=t&&0!=t.length&&(e.expressDelivery=t)}).catch(function(e){console.log(e),t.$notify.error({title:"错误",message:"加载失败！"})})},handleEdit:function(e,t){this.$parent.leftItme("订单详情","/ordersDetails/"+t.my_order_id),this.$store.commit("id",t.my_order_id)},showDelivery:function(e,t){this.dialogFormVisible1=!0,this.diveryNum=t.my_order_id},toDelivery:function(){var e=this,t=this,i=new FormData;console.log(this.diveryNum+"...."+this.deliveryNum+"...."+this.deliveryVal),i.append("myOrderId",this.diveryNum),i.append("expressDeliveryNo",this.deliveryNum),i.append("expressDeliveryName",this.deliveryVal),i.append("token",this.$store.state.userInfo.token),i.append("userId",this.$store.state.userInfo.userId),o.i(r.a)("/myorderController/updateDeliveryMyorder.do",i,"FORM",{contentType:""}).then(function(o){200==o.code&&(t.$notify({title:"成功",message:"发货成功",type:"success"}),e.diveryNum=!1,e.dialogFormVisible1=!1,e.pageData(e.pageNo,e.pageSize))}).catch(function(e){console.log(e),t.$notify.error({title:"错误",message:"发货失败"})})},handleSizeChange:function(e){this.pageSize=e,this.pageData(this.pageNo,e)},handleCurrentChange:function(e){this.pageNo=e,this.pageData(e,this.pageSize)},pageData:function(e,t){var i=this,a=this,s="";console.log(this.conDate),this.conDate.length>0&&null!=this.conDate[1]&&null!=this.conDate[0]&&(s=n()({start:this.conDate[0].getTime(),end:this.conDate[1].getTime()})),o.i(r.a)("/myorderController/queryMyorder.do",{rows:t,page:e,queryEstablishTime:s,userName:this.userName,commodityName:this.commodityName,orderType:this.orderTypeval,orderNumber:this.orderNumber},"POST").then(function(e){console.log(e),i.tableData=e.rows,i.size=e.total}).catch(function(e){console.log(e),a.$notify.error({title:"错误",message:"加载失败！"})})}},mounted:function(){this.allDeliveries(),this.pageData(this.pageNo,this.pageSize)}}},Y5Ok:function(e,t,o){var i=o("fjiJ");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o("FIqI")("5e00ae61",i,!0,{})},YFdF:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home"},[o("z-modular",{attrs:{ModClass:"homeMod"}},[o("div",{staticClass:"search input"},[o("el-input",{attrs:{type:"text",placeholder:"请输入订单号"},model:{value:e.orderNumber,callback:function(t){e.orderNumber=t},expression:"orderNumber"}})],1),e._v(" "),o("div",{staticClass:"search input"},[o("el-input",{attrs:{type:"text",placeholder:"请输入商品名称"},model:{value:e.commodityName,callback:function(t){e.commodityName=t},expression:"commodityName"}})],1),e._v(" "),o("div",{staticClass:"search input"},[o("el-input",{attrs:{type:"text",placeholder:"请输入下单人"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),e._v(" "),o("div",{staticClass:"search input"},[o("el-select",{attrs:{clearable:"",placeholder:"订单状态"},model:{value:e.orderTypeval,callback:function(t){e.orderTypeval=t},expression:"orderTypeval"}},e._l(e.orderType,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),o("div",{staticClass:"search input"},[o("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:"下单时间"},model:{value:e.conDate,callback:function(t){e.conDate=t},expression:"conDate"}})],1),e._v(" "),o("div",{staticClass:"search"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleCurrentChange(1)}}},[e._v("搜索")])],1)]),e._v(" "),o("z-modular",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","max-height":"700"}},[o("el-table-column",{attrs:{prop:"order_number",label:"订单号",width:"185"}}),e._v(" "),o("el-table-column",{attrs:{label:"订单来源","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.orderPaymentType?o("span",[e._v("APP")]):e._e(),e._v(" "),2==t.row.orderPaymentType?o("span",[e._v("H5")]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"order_type",label:"订单状态","min-width":"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"commodity_name",label:"商品名称","min-width":"160"}}),e._v(" "),o("el-table-column",{attrs:{prop:"price",label:"金额（元）","min-width":"100",sortable:""}}),e._v(" "),o("el-table-column",{attrs:{prop:"business_name",label:"商家","min-width":"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"user_name",label:"下单人","min-width":"100"}}),e._v(" "),o("el-table-column",{attrs:{label:"下单时间","min-width":"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("format")(t.row.establish_time,"yyyy-MM-dd hh:mm")))]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"支付时间","min-width":"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("format")(t.row.purchase_time,"yyyy-MM-dd hh:mm")))]}}])}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.myDetail?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){e.handleEdit(t.$index,t.row)}}},[e._v("详情")]):e._e(),e._v(" "),1==e.myLogistics&&1!==t.row.goods_receipt_type&&"待收货"==t.row.order_type||"已完成"==t.row.order_type||"待评价"==t.row.order_type?o("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(o){e.LogisticsInfo(t.$index,t.row)}}},[e._v("物流")]):e._e(),e._v(" "),1==e.myRefund&&1==t.row.payment_type&&"申请退款中"==t.row.order_type||"待评价"==t.row.order_type?o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){e.showRefund(t.$index,t.row)}}},[e._v("退款")]):e._e(),e._v(" "),"待发货"==t.row.order_type&&1==e.myDelivery?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){e.showDelivery(t.$index,t.row)}}},[e._v("发货")]):e._e()]}}])})],1),e._v(" "),o("div",{staticClass:"paginationdiv"},[o("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.size},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"发货提醒",visible:e.dialogFormVisible1},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[o("el-form",[o("el-form-item",{attrs:{label:"快递单号","label-width":e.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入快递单号"},model:{value:e.deliveryNum,callback:function(t){e.deliveryNum=t},expression:"deliveryNum"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"快递类型","label-width":e.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择快递类型"},model:{value:e.deliveryVal,callback:function(t){e.deliveryVal=t},expression:"deliveryVal"}},e._l(e.expressDelivery,function(e){return o("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible1=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.toDelivery}},[e._v("发 货")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"物  流  信  息",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",{staticClass:"logisticsInfos"},[o("div",{staticClass:"logisticsInfosTop"},[o("p",[e._v("\n          快递类型：\n          "),o("span",[e._v(e._s(e.LogisticsInfoObj.expressDeliveryName))])]),e._v(" "),o("p",[e._v("\n          快递单号：\n          "),o("span",[e._v(e._s(e.LogisticsInfoObj.expressDeliveryNo))])])]),e._v(" "),o("ul",e._l(e.LogisticsInfoObj.info,function(t){return o("li",[o("div",{staticClass:"littleInfo"},[e._v(e._s(t.acceptStation))]),e._v(" "),o("p",{staticClass:"infoDate"},[e._v(e._s(t.acceptTime))])])}))])]),e._v(" "),o("el-dialog",{attrs:{title:"退  款  申  请",visible:e.dialogVisible2,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible2=t}}},[o("div",{staticClass:"refundInfo"},[o("div",{staticClass:"refundInfoTop"},[o("p",[e._v("\n          申请时间：\n          "),o("span",[e._v(e._s(e._f("format")(e.applyTime,"yyyy-MM-dd hh:mm")))])]),e._v(" "),o("p",[e._v("\n          申请理由：\n          "),o("span",[e._v(e._s(e.applyMsg))])])]),e._v(" "),o("div",{staticClass:"rufundBottom"},[o("p",[e._v("支付金额（元）："+e._s(e.haveDone))]),e._v(" "),o("p",[o("label",[e._v("退款金额（元）")]),e._v("：\n          "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.refundMoney,expression:"refundMoney"}],attrs:{type:"number"},domProps:{value:e.refundMoney},on:{input:function(t){t.target.composing||(e.refundMoney=t.target.value)}}})])])]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.toRefund("NOPASS")}}},[e._v("拒绝退款")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toRefund("PASS")}}},[e._v("确认退款")])],1)])],1)},n=[],a={render:i,staticRenderFns:n};t.a=a},fjiJ:function(e,t,o){t=e.exports=o("UTlt")(!0),t.push([e.i,".logisticsInfos .logisticsInfosTop[data-v-80899292]{margin-bottom:25px}.logisticsInfos .logisticsInfosTop p[data-v-80899292]{font-size:18px;font-weight:550;margin-bottom:10px}.logisticsInfos .logisticsInfosTop p span[data-v-80899292]{font-weight:400;font-size:18px;color:#666}.logisticsInfos ul li[data-v-80899292]{margin-bottom:15px;border-bottom:1px solid #e6e6e6;padding-bottom:8px}.logisticsInfos ul li:first-child .infoDate[data-v-80899292],.logisticsInfos ul li:first-child .littleInfo[data-v-80899292]{color:#66cd00}.logisticsInfos ul li .littleInfo[data-v-80899292]{font-size:16px;margin-bottom:5px}.logisticsInfos ul li .infoDate[data-v-80899292]{font-size:14px;font-weight:400}.refundInfo .refundInfoTop[data-v-80899292]{border-bottom:1px solid #e6e6e6;margin-bottom:10px}.refundInfo .refundInfoTop p[data-v-80899292],.refundInfo .rufundBottom p[data-v-80899292]{font-size:16px;margin-bottom:10px}.refundInfo .rufundBottom p input[data-v-80899292]{border:1px solid #ccc;width:100px;height:25px}","",{version:3,sources:["E:/xiaoliping/newPersonProject/1.6.1/merchantsBackstage/src/page/ordersManage/index.vue"],names:[],mappings:"AACA,oDACE,kBAAoB,CACrB,AACD,sDACE,eAAgB,AAChB,gBAAiB,AACjB,kBAAoB,CACrB,AACD,2DACE,gBAAoB,AACpB,eAAgB,AAChB,UAAY,CACb,AACD,uCACE,mBAAoB,AACpB,gCAAiC,AACjC,kBAAoB,CACrB,AAID,4HACE,aAAe,CAChB,AACD,mDACE,eAAgB,AAChB,iBAAmB,CACpB,AACD,iDACE,eAAgB,AAChB,eAAoB,CACrB,AACD,4CACE,gCAAiC,AACjC,kBAAoB,CACrB,AAKD,2FAHE,eAAgB,AAChB,kBAAoB,CAKrB,AACD,mDACE,sBAAuB,AACvB,YAAa,AACb,WAAa,CACd",file:"index.vue",sourcesContent:["\n.logisticsInfos .logisticsInfosTop[data-v-80899292] {\n  margin-bottom: 25px;\n}\n.logisticsInfos .logisticsInfosTop p[data-v-80899292] {\n  font-size: 18px;\n  font-weight: 550;\n  margin-bottom: 10px;\n}\n.logisticsInfos .logisticsInfosTop p span[data-v-80899292] {\n  font-weight: normal;\n  font-size: 18px;\n  color: #666;\n}\n.logisticsInfos ul li[data-v-80899292] {\n  margin-bottom: 15px;\n  border-bottom: 1px solid #e6e6e6;\n  padding-bottom: 8px;\n}\n.logisticsInfos ul li:first-child .littleInfo[data-v-80899292] {\n  color: #66cd00;\n}\n.logisticsInfos ul li:first-child .infoDate[data-v-80899292] {\n  color: #66cd00;\n}\n.logisticsInfos ul li .littleInfo[data-v-80899292] {\n  font-size: 16px;\n  margin-bottom: 5px;\n}\n.logisticsInfos ul li .infoDate[data-v-80899292] {\n  font-size: 14px;\n  font-weight: normal;\n}\n.refundInfo .refundInfoTop[data-v-80899292] {\n  border-bottom: 1px solid #e6e6e6;\n  margin-bottom: 10px;\n}\n.refundInfo .refundInfoTop p[data-v-80899292] {\n  font-size: 16px;\n  margin-bottom: 10px;\n}\n.refundInfo .rufundBottom p[data-v-80899292] {\n  font-size: 16px;\n  margin-bottom: 10px;\n}\n.refundInfo .rufundBottom p input[data-v-80899292] {\n  border: 1px solid #ccc;\n  width: 100px;\n  height: 25px;\n}\n"],sourceRoot:""}])},wpTX:function(e,t,o){"use strict";function i(e){o("Y5Ok")}Object.defineProperty(t,"__esModule",{value:!0});var n=o("UlBi"),a=o("YFdF"),s=o("C7Lr"),l=i,r=s(n.a,a.a,!1,l,"data-v-80899292",null);t.default=r.exports}});
//# sourceMappingURL=2.0145c84422513cf350fa.js.map