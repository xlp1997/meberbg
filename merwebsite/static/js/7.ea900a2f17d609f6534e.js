webpackJsonp([7],{"3jAs":function(e,t,o){"use strict";var n=o("3cXf"),i=o.n(n),s=o("KOga");t.a={data:function(){return{bannerLength:10,daofuBtn:!1,isFocus:0,isSelfTaking:!1,dialogVisible:!1,dialogImageUrl:"",commodityName:"",commodityTypeList:[{commodityTypeName:"",commodityTypePrice:"",commodityTypeStock:"",freight:"",commodityTypeRebate:"",reward:"",consumptionReward:"",salesVolume:0}],banner:"",goodsContent:[{url:[],text:""}],sysValue:""}},methods:{cancel:function(){this.$parent.closeJump("商品管理","/goodsManage")},newsDelete:function(e){this.goodsContent.splice(e,1)},addgoosType:function(){this.commodityTypeList.push({commodityTypeName:"",commodityTypePrice:"",commodityTypeStock:"",freight:"",commodityTypeRebate:this.commodityTypeList[0].commodityTypeRebate,reward:"",consumptionReward:"",salesVolume:0})},goodsTypeDelete:function(e){this.commodityTypeList.splice(e,1)},addPhase:function(){this.goodsContent.push({url:[],text:"",newsTypeVal:""})},enlarge:function(e){console.log(e),this.dialogImageUrl=e,this.dialogVisible=!0},visibleChange:function(e){this.isFocus=1==e?1:0},goodUpload:function(e){this.banner=e},addGoods:function(){var e=this,t=this;if(""==this.commodityName)this.$message({message:"请输入商品名称",type:"warning"});else if(""==this.banner||0==this.banner.length)this.$message({message:"请上传商品封面图",type:"warning"});else{var n=!0;if(this.commodityTypeList.forEach(function(t){0==t.commodityTypeName.length&&(e.$message({message:"请输入种类名称",type:"warning"}),n=!1),0==t.commodityTypePrice.length?(e.$message({message:"请输入价格",type:"warning"}),n=!1):parseInt(t.commodityTypePrice)<0&&(e.$message({message:"价格不能为负数",type:"warning"}),n=!1);var o=/[%]/g;console.log(t.commodityTypeRebate),0==t.commodityTypeRebate.length?(e.$message({message:"请输入返佣值",type:"warning"}),n=!1):parseInt(t.commodityTypeRebate)<0?(e.$message({message:"返佣不能为负数",type:"warning"}),n=!1):o.test(t.commodityTypeRebate)||(e.$message({message:"返佣必须为百分数",type:"warning"}),n=!1),0==t.commodityTypeStock.length?(e.$message({message:"请输入库存数量",type:"warning"}),n=!1):parseInt(t.commodityTypeStock)<0?(e.$message({message:"库存不能为负数",type:"warning"}),n=!1):String(t.commodityTypeStock).indexOf(".")>-1&&(e.$message({message:"库存不能为小数",type:"warning"}),n=!1),0==t.freight.length?(e.$message({message:"请输入运费",type:"warning"}),n=!1):parseInt(t.freight)<0&&(e.$message({message:"运费不能为负数",type:"warning"}),n=!1);var i=t.commodityTypePrice*e.sysValue,s=Number(t.consumptionReward)+Number(t.reward);0==t.reward.length?(e.$message({message:"请输入导购奖励",type:"warning"}),n=!1):parseInt(t.reward)<0?(e.$message({message:"导购奖励不能为负数",type:"warning"}),n=!1):t.reward>i?(e.$message({message:"导购奖励不能超过"+i,type:"warning"}),n=!1):0==t.consumptionReward.length?(e.$message({message:"请输入消费奖励",type:"warning"}),n=!1):s>i&&(e.$message({message:"消费奖励+导购奖励不超过价格",type:"warning"}),n=!1)}),n){var a=new FormData,r=i()(this.goodsContent),m=i()(this.banner),l=i()(this.commodityTypeList);a.append("businessId",this.$store.state.userInfo.businessId),a.append("commodityId",this.$route.params.id),a.append("commodityCode",""),a.append("commodityName",this.commodityName),a.append("commodityFfList",r),a.append("commodityPhotoList",m),a.append("token",this.$store.state.userInfo.token),a.append("commodityTypeList",l),1==this.daofuBtn?a.append("isCashDelivery",1):a.append("isCashDelivery",2),1==this.isSelfTaking?a.append("isSelfTaking",1):a.append("isSelfTaking",2),o.i(s.a)("/commodityController/editCommodity.do",a,"FORM",{contentType:""}).then(function(o){200==o.code&&(t.$notify({title:"成功",message:"修改成功",type:"success"}),e.$parent.closeJump("商品管理","/goodsManage"))}).catch(function(e){console.log(e),t.$notify.error({title:"错误",message:"上传失败"})})}}},pageData:function(){var e=this;console.log(this.$route.params.id);o.i(s.a)("/commodityController/toEditCommodity.do",{commodityId:this.$route.params.id}).then(function(t){console.log(t),200==t.code?(console.log("2222222222222222"),e.commodityTypeList=JSON.parse(i()(t.commodityTypeList)),e.commodityName=t.commodityName,e.banner=t.commodityPhotoList,console.log(e.commodityTypeList),e.goodsContent=t.commodityFfList,1==t.isCashDelivery?e.daofuBtn=!0:e.daofuBtn=!1,1==t.isSelfTaking?e.isSelfTaking=!0:e.isSelfTaking=!1):e.$notify.error({title:"错误",message:t.msg})}).catch(function(t){console.log(t),e.$notify.error({title:"错误",message:"加载失败"})})},huilu:function(){var e=this;o.i(s.a)("/sysDictController/queryGoldCoinRateSysDict.do").then(function(t){e.sysValue=t[0].sysValue}).catch(function(e){console.log(e),_this.$notify.error({title:"错误",message:"加载失败！"})})}},mounted:function(){this.pageData(),this.huilu()}}},"5Y6L":function(e,t,o){t=e.exports=o("UTlt")(!0),t.push([e.i,'.demo-form-inline{padding-left:45px}.businessTypeBox{margin:15px 0 15px 55px}.businessTypeBox .businessType{padding:20px;position:relative;border:1px solid #e6e6e6;margin-bottom:15px}.businessTypeBox .businessType .el-input{margin-bottom:15px}.businessTypeBox .businessType .el-input:last-child{margin-bottom:0}.businessTypeBox .businessType .el-form-item{margin-right:80px}.businessTypeBox .businessType .closeBtn{position:absolute;right:10px;top:10px;width:30px;height:30px;border-radius:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #ccc;cursor:pointer}.businessTypeBox .businessType .closeBtn:after{content:"\\D7";font-size:26px;-webkit-transform:translateY(-3px);transform:translateY(-3px);color:#999}.businessTypeBox .businessType .closeBtn:hover:after{color:red}.videoImgTextBox{border:1px solid #ccc}.videoImgTextBox,.videoImgTextBox .nextPhaseBtn{margin-bottom:15px}.videoImgTextBox .videoImg{padding:10px;position:relative;border-bottom:1px solid #e6e6e6}.videoImgTextBox .videoImg .el-textarea{margin-bottom:15px;max-width:100%;border:0}.videoImgTextBox .videoImg .el-textarea__inner{border:0!important}.videoImgTextBox .videoImg .close{position:absolute;right:10px;top:10px;width:30px;height:30px;border-radius:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #ccc;cursor:pointer}.videoImgTextBox .videoImg .close:after{content:"\\D7";font-size:26px;-webkit-transform:translateY(-3px);transform:translateY(-3px);color:#999}.videoImgTextBox .videoImg .close:hover:after{color:red}.search{margin-top:15px}',"",{version:3,sources:["E:/xiaoliping/newPersonProject/1.6.1/merchantsBackstage/src/page/goodsManage/details.vue"],names:[],mappings:"AAEA,kBACE,iBAAmB,CACpB,AACD,iBACE,uBAA2B,CAC5B,AACD,+BACI,aAAc,AACd,kBAAmB,AACnB,yBAA0B,AAC1B,kBAAoB,CACvB,AACD,yCACM,kBAAoB,CACzB,AACD,oDACQ,eAAmB,CAC1B,AACD,6CACM,iBAAmB,CACxB,AACD,yCACM,kBAAmB,AACnB,WAAY,AACZ,SAAU,AACV,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,wBAAyB,AACrB,qBAAsB,AAClB,uBAAwB,AAChC,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,sBAAuB,AACvB,cAAgB,CACrB,AACD,+CACQ,cAAa,AACb,eAAgB,AAChB,mCAAoC,AAC5B,2BAA4B,AACpC,UAAY,CACnB,AACD,qDACQ,SAAY,CACnB,AACD,iBACE,qBAAuB,CAExB,AACD,gDAFE,kBAAoB,CAIrB,AACD,2BACI,aAAc,AACd,kBAAmB,AACnB,+BAAiC,CACpC,AACD,wCACM,mBAAoB,AACpB,eAAgB,AAChB,QAAY,CACjB,AACD,+CACM,kBAAuB,CAC5B,AACD,kCACM,kBAAmB,AACnB,WAAY,AACZ,SAAU,AACV,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,wBAAyB,AACrB,qBAAsB,AAClB,uBAAwB,AAChC,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,sBAAuB,AACvB,cAAgB,CACrB,AACD,wCACQ,cAAa,AACb,eAAgB,AAChB,mCAAoC,AAC5B,2BAA4B,AACpC,UAAY,CACnB,AACD,8CACQ,SAAY,CACnB,AACD,QACE,eAAiB,CAClB",file:"details.vue",sourcesContent:['\n@charset "UTF-8";\n.demo-form-inline {\n  padding-left: 45px;\n}\n.businessTypeBox {\n  margin: 15px 0px 15px 55px;\n}\n.businessTypeBox .businessType {\n    padding: 20px;\n    position: relative;\n    border: 1px solid #e6e6e6;\n    margin-bottom: 15px;\n}\n.businessTypeBox .businessType .el-input {\n      margin-bottom: 15px;\n}\n.businessTypeBox .businessType .el-input:last-child {\n        margin-bottom: 0px;\n}\n.businessTypeBox .businessType .el-form-item {\n      margin-right: 80px;\n}\n.businessTypeBox .businessType .closeBtn {\n      position: absolute;\n      right: 10px;\n      top: 10px;\n      width: 30px;\n      height: 30px;\n      border-radius: 50%;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      border: 1px solid #ccc;\n      cursor: pointer;\n}\n.businessTypeBox .businessType .closeBtn::after {\n        content: "×";\n        font-size: 26px;\n        -webkit-transform: translateY(-3px);\n                transform: translateY(-3px);\n        color: #999;\n}\n.businessTypeBox .businessType .closeBtn:hover::after {\n        color: #f00;\n}\n.videoImgTextBox {\n  border: 1px solid #ccc;\n  margin-bottom: 15px;\n}\n.videoImgTextBox .nextPhaseBtn {\n    margin-bottom: 15px;\n}\n.videoImgTextBox .videoImg {\n    padding: 10px;\n    position: relative;\n    border-bottom: 1px solid #e6e6e6;\n}\n.videoImgTextBox .videoImg .el-textarea {\n      margin-bottom: 15px;\n      max-width: 100%;\n      border: 0px;\n}\n.videoImgTextBox .videoImg .el-textarea__inner {\n      border: 0px !important;\n}\n.videoImgTextBox .videoImg .close {\n      position: absolute;\n      right: 10px;\n      top: 10px;\n      width: 30px;\n      height: 30px;\n      border-radius: 50%;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      border: 1px solid #ccc;\n      cursor: pointer;\n}\n.videoImgTextBox .videoImg .close::after {\n        content: "×";\n        font-size: 26px;\n        -webkit-transform: translateY(-3px);\n                transform: translateY(-3px);\n        color: #999;\n}\n.videoImgTextBox .videoImg .close:hover::after {\n        color: #f00;\n}\n.search {\n  margin-top: 15px;\n}\n'],sourceRoot:""}])},"G+mH":function(e,t,o){var n=o("5Y6L");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o("FIqI")("bad40888",n,!0,{})},NhGu:function(e,t,o){"use strict";function n(e){o("G+mH")}Object.defineProperty(t,"__esModule",{value:!0});var i=o("3jAs"),s=o("nW6j"),a=o("C7Lr"),r=n,m=a(i.a,s.a,!1,r,null,null);t.default=m.exports},nW6j:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("z-modular",[o("el-form",{ref:"companyInfo",attrs:{"label-width":"100px"}},[o("el-form-item",{attrs:{label:"名称"}},[o("el-input",{attrs:{maxlength:20},model:{value:e.commodityName,callback:function(t){e.commodityName=t},expression:"commodityName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"封面图"}},[o("z-upload",{attrs:{length:e.bannerLength,fileType:"商品"},on:{preview:e.enlarge,upload:e.goodUpload},model:{value:e.banner,callback:function(t){e.banner=t},expression:"banner"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"到付"}},[o("el-checkbox",{model:{value:e.daofuBtn,callback:function(t){e.daofuBtn=t},expression:"daofuBtn"}},[e._v("接受")])],1),e._v(" "),o("el-form-item",{attrs:{label:"门店提货"}},[o("el-checkbox",{model:{value:e.isSelfTaking,callback:function(t){e.isSelfTaking=t},expression:"isSelfTaking"}},[e._v("接受")])],1),e._v(" "),o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("span",[e._v("商品种类")]),e._v(" "),o("div",{staticClass:"businessTypeBox"},[e._l(e.commodityTypeList,function(t,n){return o("div",{staticClass:"businessType"},[o("span",{staticClass:"closeBtn",on:{click:function(t){e.goodsTypeDelete(n)}}}),e._v(" "),o("el-form-item",{attrs:{label:"种类"}},[o("el-input",{attrs:{placeholder:"种类"},model:{value:t.commodityTypeName,callback:function(o){e.$set(t,"commodityTypeName",o)},expression:"item.commodityTypeName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"价格（元）"}},[o("el-input",{attrs:{type:"number",placeholder:"价格"},model:{value:t.commodityTypePrice,callback:function(o){e.$set(t,"commodityTypePrice",o)},expression:"item.commodityTypePrice"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"库存"}},[o("el-input",{attrs:{type:"number",placeholder:"库存(请输入整数)"},model:{value:t.commodityTypeStock,callback:function(o){e.$set(t,"commodityTypeStock",o)},expression:"item.commodityTypeStock"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"运费（元）"}},[o("el-input",{attrs:{type:"number",placeholder:"运费"},model:{value:t.freight,callback:function(o){e.$set(t,"freight",o)},expression:"item.freight"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"平台服务费（%）"}},[o("el-input",{attrs:{type:"text",placeholder:"平台服务费",disabled:!0},model:{value:t.commodityTypeRebate,callback:function(o){e.$set(t,"commodityTypeRebate",o)},expression:"item.commodityTypeRebate"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"导购奖励（金币）"}},[o("el-input",{attrs:{type:"number",placeholder:"导购奖励"},model:{value:t.reward,callback:function(o){e.$set(t,"reward",o)},expression:"item.reward"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"消费奖励（金币）"}},[o("el-input",{attrs:{type:"number",placeholder:"消费奖励"},model:{value:t.consumptionReward,callback:function(o){e.$set(t,"consumptionReward",o)},expression:"item.consumptionReward"}})],1)],1)}),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addgoosType}},[e._v("添加种类")])],2)]),e._v(" "),o("el-form-item",{attrs:{label:"段落内容"}},[o("div",{staticClass:"videoImgTextBox"},e._l(e.goodsContent,function(t,n){return o("div",{staticClass:"videoImg"},[o("span",{staticClass:"close",on:{click:function(t){e.newsDelete(n)}}}),e._v(" "),o("el-input",{attrs:{placeholder:"图片/视频说明",type:"textarea",autosize:{minRows:8,maxRows:4}},model:{value:t.text,callback:function(o){e.$set(t,"text",o)},expression:"items.text"}}),e._v(" "),o("z-upload",{attrs:{fileType:"商品",type:"0",length:e.bannerLength},on:{preview:e.enlarge},model:{value:t.url,callback:function(o){e.$set(t,"url",o)},expression:"items.url"}})],1)})),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addPhase}},[e._v("下一段")])],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("保存修改")]),e._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:e.cancel}},[e._v("取消保存")])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],s={render:n,staticRenderFns:i};t.a=s}});
//# sourceMappingURL=7.ea900a2f17d609f6534e.js.map